<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/services.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/services.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { USER_MAIN_DATA, USER_ACTIVITY, USER_AVERAGE_SESSIONS, USER_PERFORMANCE } from "../data/data";
import axios from "axios";

/**
 * Gets data from API or mockedData
 */

export default class GetData {
  constructor(id, mocked) {
    this.userData = null;
    this.userActivity = null;
    this.userSessions = null;
    this.userPerformance = null;
    this.id = id;
    this.mocked = mocked;
  }

  getData = async () => {
    /**
     * axios.all(Promise) accepts array of promises and returns a new Promise which is resolved whenever all
     * of the given promises are resolved with an array with the result of each promise.
     * Axios.spread used to assign each result to a variable
     *
     */


    // Add mocked data 

    if (this.mocked) {
      console.log(this)
      this.userData = USER_MAIN_DATA.find((element) => element.id === this.id);
      this.userActivity = USER_ACTIVITY.find((element) => element.userId === this.id);
      this.userSessions = USER_AVERAGE_SESSIONS.find((element) => element.userId === this.id);
      this.userPerformance = USER_PERFORMANCE.find((element) => element.userId === this.id);
      return;
    }

    const userEndpoint = axios.get(`http://localhost:3000/user/${this.id}`);
    const activityEndpoint = axios.get(`http://localhost:3000/user/${this.id}/activity`);
    const sessionsEndpoint = axios.get(`http://localhost:3000/user/${this.id}/average-sessions`);
    const performanceEndpoint = axios.get(`http://localhost:3000/user/${this.id}/performance`);

    return await axios
      .all([userEndpoint, activityEndpoint, sessionsEndpoint, performanceEndpoint])

      .then(
        axios.spread((...response) => {
          // if (process.env.NODE_ENV === "development") {
          const userResponse = response[0];
          const activityResponse = response[1];
          const sessionsResponse = response[2];
          const performanceResponse = response[3];

          this.userData = userResponse.data.data;
          this.userActivity = activityResponse.data.data;
          this.userSessions = sessionsResponse.data.data;
          this.userPerformance = performanceResponse.data.data;
        })
      )
      .catch((err) => {
        console.log(err);
      });
  };
}

</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="module.exports.html">exports</a></li></ul><h3>Global</h3><ul><li><a href="global.html#DashBoard">DashBoard</a></li><li><a href="global.html#Error">Error</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#Login">Login</a></li><li><a href="global.html#NutritionData">NutritionData</a></li><li><a href="global.html#SideBar">SideBar</a></li><li><a href="global.html#UserActivityChart">UserActivityChart</a></li><li><a href="global.html#UserPerfomanceChart">UserPerfomanceChart</a></li><li><a href="global.html#UserScore">UserScore</a></li><li><a href="global.html#UserSessionsChart">UserSessionsChart</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Mon Aug 01 2022 22:22:02 GMT+0200 (heure d’été d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
